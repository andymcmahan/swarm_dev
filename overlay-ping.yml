version: '2'
networks:
  overlay_test:
    driver: overlay

services:
  host1:
    image: busybox
    command: '/bin/ash -c "sleep 1; while true; do ping -c 1 host2; sleep 2; done"'
    networks:
      - overlay_test
  host2:
    image: busybox
    command: '/bin/ash -c "sleep 2; while true; do ping -c 1 host1; sleep 2; done"'
    networks:
      - overlay_test
  host3:
    image: busybox
    command: '/bin/ash -c "sleep 3; while true; do ping -c 1 host4; sleep 2; done"'
    networks:
      - overlay_test
  host4:
    image: busybox
    command: '/bin/ash -c "sleep 4; while true; do ping -c 1 host3; sleep 2; done"'
    networks:
      - overlay_test
  host5:
    image: busybox
    command: '/bin/ash -c "sleep 5; while true; do ping -c 1 host6; sleep 2; done"'
    networks:
      - overlay_test
  host6:
    image: busybox
    command: '/bin/ash -c "sleep 6; while true; do ping -c 1 host5; sleep 2; done"'
    networks:
      - overlay_test
  host7:
    image: busybox
    command: '/bin/ash -c "sleep 7; while true; do ping -c 1 host8; sleep 2; done"'
    networks:
      - overlay_test
  host8:
    image: busybox
    command: '/bin/ash -c "sleep 8; while true; do ping -c 1 host7; sleep 2; done"'
    networks:
      - overlay_test
  host9:
    image: busybox
    command: '/bin/ash -c "sleep 9; while true; do ping -c 1 host10; sleep 2; done"'
    networks:
      - overlay_test
  host10:
    image: busybox
    command: '/bin/ash -c "while true; do ping -c 1 host9; sleep 2; done"'
    networks:
      - overlay_test